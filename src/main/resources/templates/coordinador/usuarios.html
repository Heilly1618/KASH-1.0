<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <title>COORDINADOR USUARIOS</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="../../css/coordinador/usuarios.css">
    </head>
    <body>
        <div class="barra">
            <div class="selection">
                <img class="icono" src="../../img/perfil.png" alt="">
                <a th:href="@{/coordinador}" class="link">mi perfil</a>
            </div>
            <div class="selection">
                <img class="icono" src="../../img/pqrs.png" alt="">
                <a th:href="@{/coordinador/PQRS}" class="link">Revisar PQRS</a>
            </div>
            <div class="selection">
                <img class="icono" src="../../img/usuarios.png" alt="">
                <a th:href="@{/coordinador/usuarios}" class="link">Control de usuarios</a>
            </div>
            <div class="selection">
                <img class="icono" src="../../img/foro.png" alt="">
                <a th:href="@{/coordinador/foro}" class="link">Control de foros</a>
            </div>
            <div class="cerrar_sesion">
                <button class="btn-cerrar-sesion"><a th:href="@{/index}">Cerrar sesión</a></button>
            </div>
        </div>

        <div class="cuerpo">
            <header>
                <img class="logo" src="../../img/logoKash.png" alt="">
                <h2>WELCOME</h2>
                <h1>KASH</h1>
            </header>
            <div class="usuarios">
                    <h2 class="titulo">Lista de usuarios</h2>
                <div class="search-bar">
                    <form th:action="@{/coordinador/buscar}" method="get">
                        <label for="filtro">Buscar Usuario:</label>
                        <input type="text" id="filtro" name="filtro" placeholder="Buscar usuario">
                        <button type="submit" class="btn-primario">Buscar</button>
                    </form>
                </div>



                <div class="table-container">
                    <div class="reporte-botones">
                        <a th:href="@{/coordinador/reporte-usuarios}" target="_blank" class="btn-generar-reporte">Reporte usuarios</a>
                        <th:block th:if="${usuarios.size() == 1}">
                            <a th:href="@{/coordinador/reporte-usuario-individual(id=${usuarios[0].idUsuario})}" target="_blank" class="btn-generar-reporte">Descargar Reporte Individual</a>
                        </th:block>
                    </div>
                    <table border="1">
                        <thead>
                            <tr>
                                <th>Número de documento:</th>
                                <th>Rol</th>
                                <th>Nombre</th>
                                <th>Primer Apellido</th>
                                <th>Segundo Apellido</th>
                                <th>Fecha de Nacimiento</th>
                                <th>Tipo de Documento</th>
                                <th>Trimestre</th>
                                <th>Correo</th>
                                <th>Número</th>
                                <th>Usuario</th>
                                <th>Contraseña</th>
                                <th>Acciones</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="u : ${usuarios}">
                                <td th:text="${u.idUsuario}"></td>
                                <td th:text="${u.rolSeleccionado}"></td>
                                <td th:text="${u.nombres}"></td>
                                <td th:text="${u.primerA}"></td>
                                <td th:text="${u.segundoA}"></td>
                                <td th:text="${u.fNacimiento}"></td>
                                <td th:text="${u.tDocumento}"></td>
                                <td th:text="${u.trimestre}"></td>
                                <td th:text="${u.correo}"></td>
                                <td th:text="${u.numero}"></td>
                                <td th:text="${u.usuario}"></td>
                                <td th:text="${u.pass}"></td>
                                <td>
                                    <div class="action-buttons">
                                        <a th:href="@{/coordinador/editar/{id}(id=${u.idUsuario})}" class="btn-editar">Editar</a>
                                        <form th:action="@{/coordinador/eliminar}" method="post" class="delete-form">
                                            <input type="hidden" name="idUsuario" th:value="${u.idUsuario}">
                                            <button type="submit" class="btn-eliminar" onclick="return confirm('¿Estás seguro de que deseas eliminar este usuario?')">Eliminar</button>
                                        </form>
                                    </div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>

            </div>
        </div>

    </body>
</html>
